<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<title>YDB Qdrant diagrams</title>
<style>
  :root{--bg:#0b0f14;--fg:#e6edf3;--muted:#9da7b3;--acc:#00e5a8}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
  a{color:var(--acc);text-decoration:none}
  .wrap{max-width:960px;margin:0 auto;padding:48px 20px}
  h1{font-size:32px;margin:0 0 12px}
  .lead{color:var(--muted);margin:0 0 24px}
  figure{margin:24px 0}
  img{max-width:100%;height:auto;border:1px solid #19212b;border-radius:8px;display:block;margin:0 auto}
  .muted{color:var(--muted)}
  .nav{margin-bottom:24px;font-size:14px}
  .hero-demo{margin:4px 0 24px;font-size:14px;display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;border:1px solid var(--acc);background:#0d131a;color:var(--acc)}
  .copy-btn{font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid var(--acc);background:transparent;color:var(--acc);cursor:pointer;flex-shrink:0}
</style>
</head>
<body>
  <main class="wrap">
    <div class="nav muted">
      <a href="/">Home</a> ·
      <a href="/en/">English landing</a> ·
      <a href="/ru/">Русская страница</a>
    </div>

    <h1>Architecture diagrams</h1>
    <p class="lead">Pre‑rendered diagrams generated from the PlantUML sources in <code>schemas/</code> via <code>npm run diagrams</code>.</p>
    <p class="hero-demo">Public demo Qdrant base URL: <code>http://ydb-qdrant.tech:8080</code><button type="button" class="copy-btn" data-copy-demo-url="http://ydb-qdrant.tech:8080">Copy</button></p>

    <section>
      <h2>Context (C4)</h2>
      <figure>
        <img src="/assets/C4_Context.svg" alt="C4 context diagram for YDB Qdrant-compatible service">
        <figcaption class="muted">High-level C4 context diagram.</figcaption>
      </figure>
    </section>

    <section>
      <h2>Containers</h2>
      <figure>
        <img src="/assets/C4_Container.svg" alt="C4 container diagram for YDB-Qdrant service components">
        <figcaption class="muted">C4 container diagram showing service components, repositories, index scheduler, YDB client, and YDB.</figcaption>
      </figure>
    </section>

    <section>
      <h2>Components</h2>
      <figure>
        <img src="/assets/C4-Component-API-Server.svg" alt="Component diagram of the REST API Server (Express application)">
        <figcaption class="muted">REST API server components: Express app, request logger, health endpoint, collections and points routers.</figcaption>
      </figure>
      <figure>
        <img src="/assets/C4-Component-Repository-Layer.svg" alt="Component diagram of the repository layer">
        <figcaption class="muted">Repository layer: collections/points repositories, tenant utilities, type/schemas, and schema manager.</figcaption>
      </figure>
      <figure>
        <img src="/assets/C4-Component-Index-Scheduler.svg" alt="Component diagram of the index scheduler">
        <figcaption class="muted">Index scheduler components: in-memory scheduler state, notifyUpsert(), requestIndexBuild(), timer logic, and threshold gate.</figcaption>
      </figure>
      <figure>
        <img src="/assets/C4-Component-YDB-Integration.svg" alt="Component diagram of the YDB integration layer">
        <figcaption class="muted">YDB integration components: YDB driver, helpers, schema manager, environment config, logger, and database.</figcaption>
      </figure>
    </section>

    <section>
      <h2>Entity–Relationship (ER) diagram</h2>
      <figure>
        <img src="/assets/ER_Diagram.svg" alt="ER diagram of YDB tables used by the service">
        <figcaption class="muted">ER diagram of the YDB metadata and collection tables.</figcaption>
      </figure>
    </section>
  </main>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=104844437', 'ym');

    ym(104844437, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/104844437" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      var copyButtons = document.querySelectorAll('[data-copy-demo-url]');
      if (copyButtons && copyButtons.length) {
        copyButtons.forEach(function(btn) {
          btn.addEventListener('click', function() {
            var url = btn.getAttribute('data-copy-demo-url');
            if (!url) return;

            function trackCopy(success) {
              try { ym(104844437, 'reachGoal', 'demo_url_copy', {page: 'docs', area: 'hero', success: !!success}); } catch (e) {}
            }

            function showFeedback() {
              var originalText = btn.textContent;
              btn.textContent = 'Copied!';
              btn.style.background = 'var(--acc)';
              btn.style.color = '#041013';
              setTimeout(function() {
                btn.textContent = originalText;
                btn.style.background = 'transparent';
                btn.style.color = 'var(--acc)';
              }, 2000);
            }

            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText(url).then(function() {
                trackCopy(true);
                showFeedback();
              }).catch(function() {
                fallbackCopy(url);
              });
            } else {
              fallbackCopy(url);
            }

            function fallbackCopy(text) {
              try {
                var ta = document.createElement('textarea');
                ta.value = text;
                ta.style.position = 'fixed';
                ta.style.opacity = '0';
                document.body.appendChild(ta);
                ta.focus();
                ta.select();
                var ok = document.execCommand('copy');
                document.body.removeChild(ta);
                trackCopy(ok);
                if (ok) showFeedback();
              } catch (e) {
                trackCopy(false);
              }
            }
          });
        });
      }
    });
  </script>

</body>
</html>


