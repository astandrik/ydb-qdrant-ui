<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<meta name="description" content="Qdrant‑совместимый API векторного поиска на YDB. Однофазный top‑k с автоматическим векторным индексом YDB и резервным сканированием таблицы. Самохостинг или публичная демо‑версия.">
<meta name="robots" content="index, follow">
<meta name="author" content="ydb-qdrant">
<meta name="theme-color" content="#0b0f14">
<meta property="og:title" content="Qdrant API на YDB">
<meta property="og:description" content="Qdrant‑совместимый векторный поиск на YDB: однофазный top‑k с автоматическим векторным индексом.">
<meta property="og:type" content="website">
<meta property="og:image" content="/assets/preview.png">
<meta property="og:image:width" content="1024">
<meta property="og:image:height" content="1024">
<meta property="og:image:type" content="image/png">
<meta property="og:site_name" content="Qdrant API на YDB">
<meta property="og:image:alt" content="IDE агент с настроенным Qdrant‑совместимым URL на YDB">
<meta property="og:locale" content="ru_RU">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Qdrant API на YDB">
<meta name="twitter:description" content="Qdrant‑совместимый векторный поиск на YDB: однофазный top‑k с автоматическим векторным индексом.">
<meta name="twitter:image" content="/assets/preview.png">
<title>Qdrant API на YDB</title>
<style>
  :root{--bg:#0b0f14;--fg:#e6edf3;--muted:#9da7b3;--acc:#00e5a8}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial}
  a{color:var(--acc);text-decoration:none}
  .wrap{max-width:920px;margin:0 auto;padding:48px 20px}
  h1{font-size:32px;margin:0 0 12px}
  .lead{color:var(--muted);margin:0 0 24px}
  pre{background:#11161d;border:1px solid #19212b;border-radius:8px;padding:12px;overflow:auto}
  code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
  .grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));margin-top:24px}
  .card{border:1px solid #19212b;border-radius:8px;padding:16px;background:#0d131a}
  .card-standalone{margin-top:24px}
  .muted{color:var(--muted)}
  .cta{display:inline-block;padding:10px 14px;border:1px solid var(--acc);border-radius:8px}
  .gh-icon{position:fixed;top:12px;right:12px;width:32px;height:32px;border:1px solid #19212b;border-radius:50%;background:#0d131a;display:grid;place-items:center}
  .gh-icon svg{width:18px;height:18px;fill:var(--fg)}
  details{margin:12px 0}
  details summary{cursor:pointer;color:var(--acc)}
  details[open] summary{color:var(--fg)}
  .lang{position:fixed;top:12px;left:12px;color:var(--muted)}
  .lang a{color:var(--acc);margin:0 4px}
  .hero{margin-bottom:40px}
  .hero-demo{margin-top:4px;font-size:14px;display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;border:1px solid var(--acc);background:#0d131a;color:var(--acc)}
  .copy-btn{font-size:12px;padding:4px 10px;border-radius:999px;border:1px solid var(--acc);background:transparent;color:var(--acc);cursor:pointer;flex-shrink:0}
  .hero-footnote{margin-top:4px;font-size:14px}
  .section{margin-top:40px}
  .section-title{font-size:20px;margin:0 0 12px}
  .hero-actions{display:flex;flex-wrap:wrap;gap:12px;margin:16px 0 12px}
  .btn-primary,.btn-secondary{display:inline-block;padding:10px 18px;border-radius:999px;font-weight:600;font-size:14px}
  .btn-primary{background:var(--acc);color:#041013}
  .btn-secondary{border:1px solid var(--acc);color:var(--acc)}
</style>
</head>
<body>
  <div class="lang"><a href="/ru/">Русский</a> | <a href="/en/">English</a></div>
  <a id="gh-repo-icon" class="gh-icon" href="https://github.com/astandrik/ydb-qdrant" aria-label="Репозиторий GitHub" target="_blank" rel="noopener">
    <svg viewBox="0 0 16 16" role="img" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38C13.71 14.53 16 10.54 16 7c0-4.42-3.58-8-8-8z"></path></svg>
  </a>
  <main class="wrap">
    <section class="hero">
      <h1><img src="/logo.svg?v=1" alt="Логотип YDB Qdrant" style="vertical-align:middle;margin-right:8px;height:24px;width:auto"> Qdrant API на YDB</h1>
      <p class="lead">Совместимый с Qdrant REST API с однофазным top‑k поиском на YDB с перестраивающимся векторным индексом.</p>
      <div class="hero-actions">
        <a id="hero-ide-btn" class="btn-primary" href="#ide-config">Использовать hosted endpoint в IDE</a>
        <a id="hero-gh-btn" class="btn-secondary" href="https://github.com/astandrik/ydb-qdrant" target="_blank" rel="noopener">Открыть на GitHub</a>
        <a id="hero-docs-link" class="muted" href="/docs/">Архитектура и диаграммы →</a>
      </div>
      <p class="hero-demo">Публичный demo‑endpoint: <code>http://ydb-qdrant.tech:8080</code><button type="button" class="copy-btn" data-copy-demo-url="http://ydb-qdrant.tech:8080">Копировать</button></p>
      <p class="hero-footnote muted">Идеально как базовый URL Qdrant для IDE‑агентов (Roo Code, Cline) и RAG‑сервисов на YDB.</p>
    </section>

    <section class="section">
      <h2 class="section-title">Почему YDB‑Qdrant</h2>
      <div class="grid">
        <div class="card">
          <strong>Транзакционность и консистентность</strong>
          <p class="muted">Сервис опирается на распределённые ACID‑транзакции YDB с изоляцией Serializable, поэтому векторы живут рядом с основными бизнес‑данными.</p>
        </div>
        <div class="card">
          <strong>Единая платформа данных</strong>
          <p class="muted">Строки, события и векторы хранятся в одной базе YDB, запросы пишутся на YQL, без отдельного движка векторной БД.</p>
        </div>
        <div class="card">
          <strong>Надёжность и эксплуатация</strong>
          <p class="muted">Используйте multi‑AZ, backup/restore и disaster recovery YDB вместо самостоятельной эксплуатации кластера Qdrant.</p>
        </div>
        <div class="card">
          <strong>Путь к безопасной мультитенантности</strong>
          <p class="muted">Сейчас изоляция по арендаторам через заголовок <code>X-Tenant-Id</code>; далее — IAM/OAuth и ACL на коллекции для внутренних сценариев.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">Где лучше всего подходит</h2>
      <div class="grid">
        <div class="card">
          <strong>Отлично подходит</strong>
          <ul class="muted">
            <li>Для прототипов и экспериментов с векторным поиском на YDB.</li>
            <li>Для коллекций примерно до 10K–50K векторов.</li>
            <li>Для IDE‑агентов (Roo Code, Cline), ожидающих Qdrant API.</li>
            <li>Для сервисов, которые уже используют YDB и хотят быстро добавить векторный поиск.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">Планы</h2>
      <div class="grid">
        <div class="card">
          <strong>Дорожная карта</strong>
          <ul class="muted">
            <li>Усиление production‑сценариев с жёсткими SLA и сильной мультитенантной auth/z (IAM/OAuth, ACL на коллекции).</li>
            <li>Квоты и rate limiting по арендаторам (коллекции, RPS, размеры payload и батчей) плюс расширенный аудит операций.</li>
            <li>Поддержка больших коллекций (&gt;100K векторов) и частых bulk‑upsert через батч‑операции и тюнинг индексов.</li>
            <li>Лучшая поддержка высоконагруженных сценариев с миллионами векторов и более жёсткими требованиями по задержкам.</li>
            <li>Расширение покрытия Qdrant API на YDB (фильтры, facets, recommend/discover, batch‑поиск и др. расширенные режимы).</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">Быстрый старт</h2>

      <details id="ide-config">
        <summary>Настройка в Roo Code/Kilo Code</summary>
        <figure style="margin:16px 0">
          <img src="/assets/2025-10-25_16-35-47.png" alt="Скриншот конфигурации IDE-агента" style="width:100%;max-width:640px;height:auto;border:1px solid #19212b;border-radius:8px;display:block;margin:0 auto">
        </figure>
        <p class="muted">Публичный demo‑endpoint для IDE: <code>http://ydb-qdrant.tech:8080</code> (вставьте в IDE/агент как базовый URL Qdrant).</p>
      </details>

      <details id="ide-config-diagram">
        <summary>Как это работает под капотом</summary>
        <figure style="margin:16px 0">
          <img src="/assets/diagram.svg" alt="Поток запросов: IDE/Agent → ydb-qdrant (Node.js) → YDB векторы + индекс" style="width:100%;max-width:960px;height:auto;border:1px solid #19212b;border-radius:8px;display:block;margin:0 auto">
        </figure>
      </details>

      <div class="grid">
        <div class="card">
          <strong>Варианты</strong>
          <ul class="muted">
            <li>Самостоятельный хостинг: http://localhost:8080/</li>
            <li>Хостируемый demo‑endpoint для IDE: <a href="http://ydb-qdrant.tech:8080/" target="_blank" rel="noopener">http://ydb-qdrant.tech:8080/</a> (скопируйте в IDE/агент как базовый URL Qdrant)</li>
          </ul>
        </div>

        <div class="card">
          <strong>Документация</strong>
          <ul class="muted">
            <li><a href="/docs/">Диаграммы сервиса (C4 + ER)</a></li>
            <li><a href="https://ydb.tech/docs/en/" target="_blank" rel="noopener">Документация YDB (обзор)</a></li>
            <li><a href="https://ydb.tech/docs/en/yql/reference/" target="_blank" rel="noopener">Справочник YQL</a></li>
            <li><a href="https://ydb.tech/docs/en/concepts/vector_search" target="_blank" rel="noopener">Векторный поиск (приближённый)</a></li>
            <li><a href="https://ydb.tech/docs/en/dev/vector-indexes" target="_blank" rel="noopener">Векторные индексы (vector_kmeans_tree)</a></li>
            <li><a href="https://cloud.yandex.com/en/docs/ydb/" target="_blank" rel="noopener">Документация YDB Cloud</a></li>
          </ul>
        </div>
      </div>

      <div class="card card-standalone">
        <strong>Самостоятельный хостинг</strong>
        <ol class="muted">
          <li>Клонируйте репозиторий и установите зависимости: <code>npm install</code></li>
          <li>Укажите переменные окружения: <code>YDB_ENDPOINT</code>, <code>YDB_DATABASE</code></li>
          <li>Настройте аутентификацию через переменные окружения: <code>YDB_SERVICE_ACCOUNT_KEY_FILE_CREDENTIALS</code> | <code>YDB_METADATA_CREDENTIALS</code> | <code>YDB_ACCESS_TOKEN_CREDENTIALS</code> | <code>YDB_ANONYMOUS_CREDENTIALS</code></li>
          <li>Запустите: <code>npm run dev</code> (разработка) или <code>npm start</code> (прод)</li>
          <li>Укажите клиенту базовый URL: <code>http://localhost:8080</code></li>
        </ol>
        <p class="muted">Подробнее: <a id="gh-readme-link" href="https://github.com/astandrik/ydb-qdrant" target="_blank" rel="noopener">GitHub README</a></p>
      </div>
    </section>

    <section class="section">
      <h2 class="section-title">API кратко</h2>

      <div class="grid">
        <div class="card">
          <strong>Назначение</strong>
          <p class="muted">Используйте как базовый URL Qdrant для IDE‑агентов или приложений; векторы хранятся в YDB.</p>
        </div>
        <div class="card">
          <strong>Особенности</strong>
          <ul class="muted">
            <li>Совместимые с Qdrant эндпоинты</li>
            <li>Однофазный top‑k с векторным индексом YDB (авто); фоллбек — скан таблицы</li>
            <li>Разделение данных по арендаторам</li>
            <li>Самохостинг или hosted endpoint для IDE</li>
          </ul>
        </div>
      </div>

      <h2>Пример</h2>
      <pre><code>curl -X PUT http://localhost:8080/collections/mycol \
  -H 'Content-Type: application/json' \
  -d '{"vectors":{"size":384,"distance":"Cosine","data_type":"float"}}'

curl -X POST http://localhost:8080/collections/mycol/points/upsert \
  -H 'Content-Type: application/json' \
  -d '{"points":[{"id":"1","vector":[0.1,0.2,...384 vals...]}]}'

curl -X POST http://localhost:8080/collections/mycol/points/search \
  -H 'Content-Type: application/json' \
  -d '{"vector":[0.1,0.2,...],"limit":5,"with_payload":true}'</code></pre>

      <p class="muted">Проверка состояния: GET /health → {"status":"ok"}</p>
    </section>

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=104844437', 'ym');

    ym(104844437, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/104844437" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      var repoIcon = document.getElementById('gh-repo-icon');
      if (repoIcon) {
        repoIcon.addEventListener('click', function() {
          try { ym(104844437, 'reachGoal', 'repo_click', {target: 'icon'}); } catch (e) {}
        });
      }

      var readmeLink = document.getElementById('gh-readme-link');
      if (readmeLink) {
        readmeLink.addEventListener('click', function() {
          try { ym(104844437, 'reachGoal', 'repo_click', {target: 'readme'}); } catch (e) {}
        });
      }

      var ideConfig = document.getElementById('ide-config');
      if (ideConfig) {
        ideConfig.addEventListener('toggle', function() {
          if (ideConfig.open) {
            try { ym(104844437, 'reachGoal', 'ide_config_open'); } catch (e) {}
            try { ym(104844437, 'reachGoal', 'instructions_open'); } catch (e) {}
          }
        });
      }

      var heroBtn = document.getElementById('hero-ide-btn');
      var heroGhBtn = document.getElementById('hero-gh-btn');
      var heroDocsLink = document.getElementById('hero-docs-link');
      var ideDetails = document.getElementById('ide-config');
      var copyButtons = document.querySelectorAll('[data-copy-demo-url]');

      function openIdeDetails(scrollSmooth) {
        if (!ideDetails) return;
        ideDetails.open = true;
        try {
          ideDetails.scrollIntoView({behavior: scrollSmooth ? 'smooth' : 'auto', block: 'start'});
        } catch (e) {
          ideDetails.scrollIntoView();
        }
      }

      if (heroBtn && ideDetails) {
        heroBtn.addEventListener('click', function(e) {
          e.preventDefault();
          openIdeDetails(true);
          try { ym(104844437, 'reachGoal', 'hero_ide_click'); } catch (err) {}
          if (history && history.replaceState) {
            history.replaceState(null, '', '#ide-config');
          }
        });
      }

      if (heroGhBtn) {
        heroGhBtn.addEventListener('click', function() {
          try { ym(104844437, 'reachGoal', 'hero_gh_click'); } catch (err) {}
        });
      }

      if (heroDocsLink) {
        heroDocsLink.addEventListener('click', function() {
          try { ym(104844437, 'reachGoal', 'hero_docs_click'); } catch (err) {}
        });
      }

      if (copyButtons && copyButtons.length) {
        copyButtons.forEach(function(btn) {
          btn.addEventListener('click', function() {
            var url = btn.getAttribute('data-copy-demo-url');
            if (!url) return;

            function trackCopy(success) {
              try { ym(104844437, 'reachGoal', 'demo_url_copy', {page: 'ru', area: 'hero', success: !!success}); } catch (e) {}
            }

            function showFeedback() {
              var originalText = btn.textContent;
              btn.textContent = 'Скопировано!';
              btn.style.background = 'var(--acc)';
              btn.style.color = '#041013';
              setTimeout(function() {
                btn.textContent = originalText;
                btn.style.background = 'transparent';
                btn.style.color = 'var(--acc)';
              }, 2000);
            }

            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText(url).then(function() {
                trackCopy(true);
                showFeedback();
              }).catch(function() {
                fallbackCopy(url);
              });
            } else {
              fallbackCopy(url);
            }

            function fallbackCopy(text) {
              try {
                var ta = document.createElement('textarea');
                ta.value = text;
                ta.style.position = 'fixed';
                ta.style.opacity = '0';
                document.body.appendChild(ta);
                ta.focus();
                ta.select();
                var ok = document.execCommand('copy');
                document.body.removeChild(ta);
                trackCopy(ok);
                if (ok) showFeedback();
              } catch (e) {
                trackCopy(false);
              }
            }
          });
        });
      }

      if (location.hash === '#ide-config') {
        openIdeDetails(false);
      }
    });
  </script>



  </main>
</body>
</html>
